[*]
$path subfiles		# May use env variables:	$path $CARMEN_HOME/src/param_daemon/examples/subfiles
# Parameters for all robots

#example parameters
skeleton_module_sensor_getkey on

#####################################
##### Localization and Mapping ######
#####################################


###############################
# Localize Ackerman parameters

###################################################################
## Parametros para localize_ackerman_correction_type 0
$module localize_ackerman
localize_ackerman_correction_type		0 # correcao usando soma das likelihood do map
localize_num_particles					300
localize_ackerman_jump_size 			1
localize_use_log_odds					on
localize_lmap_std						0.40
localize_tracking_beam_minlikelihood	0.04
localize_tracking_beam_maxlikelihood	0.99
localize_global_lmap_std				5.60
localize_global_beam_minlikelihood		0.20
localize_global_beam_maxlikelihood		0.98
localize_min_wall_prob					0.25
localize_occupied_prob					0.5
localize_outlier_fraction				0.75
localize_phi_bias_std					0.0005
localize_small_remission_likelihood 	0.005
localize_min_remission_variance 		0.00025
localize_yaw_uncertainty_due_to_grid_resolution	0.107 # em graus
localize_xy_uncertainty_due_to_grid_resolution	0.01  # em metros
localize_particles_normalize_factor		1.0
localize_remission_particles_normalize_factor	0.005
localize_v_uncertainty_at_zero_v		0.0 # meters / second
localize_remission_variance_multiplier	2.0

###################################################################
## Parametros para localize_ackerman_correction_type 7
$module localize_ackerman
#localize_ackerman_correction_type		7 # correcao usando a mahalanobis distance da remission do velodyne para o mapa de remission
#localize_num_particles					300
#localize_ackerman_jump_size 			20
#localize_use_log_odds					off
#localize_lmap_std						0.40
#localize_tracking_beam_minlikelihood	0.04
#localize_tracking_beam_maxlikelihood	0.99
#localize_global_lmap_std				5.60
#localize_global_beam_minlikelihood		0.20
#localize_global_beam_maxlikelihood		0.98
#localize_min_wall_prob					0.1
#localize_occupied_prob					0.5
#localize_outlier_fraction				0.9	# percentual das particulas em que um dado laser tenha dado ruim para que este laser seja descartado no computo do peso das particulas
#localize_phi_bias_std					0.0005
#localize_small_remission_likelihood		0.005
#localize_min_remission_variance			0.00025
#localize_yaw_uncertainty_due_to_grid_resolution	0.157 # em graus
#localize_xy_uncertainty_due_to_grid_resolution	0.015  # em metros
#localize_particles_normalize_factor	0.005
#localize_remission_particles_normalize_factor	0.005
#localize_v_uncertainty_at_zero_v		1.5 # meters / second
#localize_remission_variance_multiplier	0.5


###################################################################
## Parametros para localize_ackerman_correction_type 8
$module localize_ackerman
#localize_ackerman_correction_type		8 # 0 + 7
#localize_num_particles					300
#localize_ackerman_jump_size 			5
#localize_use_log_odds					off
#localize_lmap_std						0.40
#localize_tracking_beam_minlikelihood	0.04
#localize_tracking_beam_maxlikelihood	0.99
#localize_global_lmap_std				5.60
#localize_global_beam_minlikelihood		0.20
#localize_global_beam_maxlikelihood		0.98
#localize_min_wall_prob					0.25
#localize_occupied_prob					0.5
#localize_outlier_fraction				0.75
#localize_phi_bias_std					0.0005
#localize_small_remission_likelihood 	0.005
#localize_min_remission_variance 		0.00025
#localize_yaw_uncertainty_due_to_grid_resolution	0.157 # em graus
#localize_xy_uncertainty_due_to_grid_resolution	0.015  # em metros
#localize_particles_normalize_factor		1.0
#localize_remission_particles_normalize_factor	0.005
#localize_v_uncertainty_at_zero_v		0.0 # meters / second
#localize_remission_variance_multiplier	2.0

###################################################################
#localize_ackerman_correction_type	1 # correcao usando coseno entre os mapas probabilisticos
#localize_ackerman_correction_type	2 # correcao usando coseno entre o mapa de likelihood
#localize_ackerman_correction_type	3 # correcao usando a distancia de pearson
#localize_ackerman_correction_type	4 # correcao usando coseno entre os mapas de remission
#localize_ackerman_correction_type	5 # correcao usando coseno entre os mapas de remission mais o coseno do mapa de grid
#localize_ackerman_correction_type	6 # correcao usando
#localize_ackerman_correction_type	7 # correcao usando a mahalanobis distance da remission do velodyne para o mapa de remission
#localize_ackerman_correction_type	8 # correcao usando a mahalanobis distance da remission do velodyne para o mapa de remission + mapas de ocupacao (correction_type 0)

localize_laser_max_range		50.0  # TODO: ler do laser. E no caso do mapper produzindo o laser?

$module localize_ackerman
localize_ackerman_safe_range_above_sensors 	-0.3
localize_ackerman_number_of_sensors 		26
localize_ackerman_velodyne 					on 

localize_ackerman_unsafe_height_above_ground	10.5

localize_ackerman_velodyne_laser_max_range		50.0
localize_ackerman_velodyne_range_max			50.0
localize_ackerman_velodyne_locc 				3.7
localize_ackerman_velodyne_lfree				-0.6
localize_ackerman_velodyne_l0					0.0
localize_ackerman_velodyne_unexpeted_delta_range_sigma 	0.45
localize_ackerman_velodyne_range_max_factor		1.0

#Velodyne publicando variable_scan
localize_ackerman_lidar0				off
localize_ackerman_lidar0_locc 				3.7
localize_ackerman_lidar0_lfree				-0.6
localize_ackerman_lidar0_l0					0.0
localize_ackerman_lidar0_unexpeted_delta_range_sigma 	0.45
localize_ackerman_lidar0_range_max_factor		1.0

localize_ackerman_laser_ldmrs 				off
localize_ackerman_laser_ldmrs_locc 				5.0
localize_ackerman_laser_ldmrs_lfree 			-5.0
localize_ackerman_laser_ldmrs_l0 				0.0
localize_ackerman_laser_ldmrs_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne2 				off
localize_ackerman_stereo_velodyne2_locc 			5.0
localize_ackerman_stereo_velodyne2_lfree 			-5.0
localize_ackerman_stereo_velodyne2_l0 				0.0
localize_ackerman_stereo_velodyne2_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne3 				off
localize_ackerman_stereo_velodyne3_locc				2.0
localize_ackerman_stereo_velodyne3_lfree			-10.0
localize_ackerman_stereo_velodyne3_l0				-1.3
localize_ackerman_stereo_velodyne3_unexpeted_delta_range_sigma 	0.2

localize_ackerman_stereo_velodyne4 				off
localize_ackerman_stereo_velodyne4_locc				5.0
localize_ackerman_stereo_velodyne4_lfree			-5.0
localize_ackerman_stereo_velodyne4_l0				0.0
localize_ackerman_stereo_velodyne4_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne5				off
localize_ackerman_stereo_velodyne5_locc				5.0
localize_ackerman_stereo_velodyne5_lfree			-5.0
localize_ackerman_stereo_velodyne5_l0 				0.0
localize_ackerman_stereo_velodyne5_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne6				off
localize_ackerman_stereo_velodyne6_locc				5.0
localize_ackerman_stereo_velodyne6_lfree			-5.0
localize_ackerman_stereo_velodyne6_l0				0.0
localize_ackerman_stereo_velodyne6_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne7				off
localize_ackerman_stereo_velodyne7_locc				5.0
localize_ackerman_stereo_velodyne7_lfree			-5.0
localize_ackerman_stereo_velodyne7_l0				0.0
localize_ackerman_stereo_velodyne7_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne8				off
localize_ackerman_stereo_velodyne8_locc				5.0
localize_ackerman_stereo_velodyne8_lfree			-5.0
localize_ackerman_stereo_velodyne8_l0				0.0
localize_ackerman_stereo_velodyne8_unexpeted_delta_range_sigma 	6.0

localize_ackerman_stereo_velodyne9				off
localize_ackerman_stereo_velodyne9_locc				5.0
localize_ackerman_stereo_velodyne9_lfree			-5.0
localize_ackerman_stereo_velodyne9_l0				0.0
localize_ackerman_stereo_velodyne9_unexpeted_delta_range_sigma 	6.0

localize_ackerman_swarm_max_particle_velocity			2.0
localize_ackerman_swarm_max_particle_angular_velocity	0.5
localize_ackerman_swarm_num_iteration				5

localize_ackerman_max_particle_displacement			10.0
localize_ackerman_max_particle_angular_displacement	0.5

localize_ackerman_de_crossover_rate			0.9
localize_ackerman_de_mutation_rate			0.2
localize_ackerman_de_num_iteration			2

localize_ackerman_velocity_noise_velocity	0.15  	# standard deviation in meters/s
localize_ackerman_velocity_noise_phi		0.0    	# standard deviation in radians
localize_ackerman_phi_noise_phi				0.35	# standard deviation in radians
localize_ackerman_phi_noise_velocity		0.0    	# standard deviation in radians

#localize_ackerman_prediction_type 0	# differential prediction (v and w)
localize_ackerman_prediction_type 1	# v and phi prediction
#localize_ackerman_prediction_type 2	# acc and w prediction (IMU only) -> desligue robot_publish_odometry

localize_use_rear_laser			off

localize_update_distance		0.0
localize_integrate_angle_deg	3.0
localize_do_scanmatching		off
localize_constrain_to_map		off
localize_global_evidence_weight		0.01
localize_global_distance_threshold	2.0
localize_global_test_samples		100000
localize_use_sensor				on

## new (learned) motion model
localize_mean_c_d 			-0.0123
localize_mean_c_t 			-0.1065
localize_std_dev_c_d 		0.1380
localize_std_dev_c_t 		0.2347

localize_mean_d_d 			1.0055
localize_mean_d_t 			0.0025
localize_std_dev_d_d 		0.1925
localize_std_dev_d_t 		0.3982

localize_mean_t_d 			-0.0035
localize_mean_t_t 			0.9638
localize_std_dev_t_d 		0.0110
localize_std_dev_t_t 		0.3300


################################
#SLAM ICP parameters
$module slam_icp
slam_icp_initialization_time 0.0	
slam_icp_update_distance 0.1
slam_icp_update_angle 5.0
slam_icp_highest_point 3.0


###############################
# Localize Monte Carlo parameters
$module localize_traf
localize_traf_num_particles 500

# see MotionModelTypes enumeration
# OdometryMotionModel = 1
# VelocityMotionModel = 2
# AckermanMotionModel = 3
localize_traf_motion_model 3

localize_traf_odom_a1 0.00002	
localize_traf_odom_a2 0.00001	
localize_traf_odom_a3 0.00002	
localize_traf_odom_a4 0.00001	
                                        
localize_traf_ack_a1 0.02
localize_traf_ack_a2 0.001
localize_traf_ack_a3 0.001
localize_traf_ack_a4 0.001
localize_traf_global_distance_threshold	2.0

localize_traf_vel_a1 0.01
localize_traf_vel_a2 0.5
localize_traf_vel_a3 0.01
localize_traf_vel_a4 0.5
localize_traf_vel_a5 0.01
localize_traf_vel_a6 0.5

localize_traf_laser_sampling_step 	18
localize_traf_laser_num_beams 		361
localize_traf_laser_fov_range 		180.0
localize_traf_laser_start_angle		-90.0
localize_traf_laser_max_range 		20.0
localize_traf_laser_lambda_short 	1.0
localize_traf_laser_sigma_zhit 		0.3
localize_traf_laser_zhit 		0.3
localize_traf_laser_zmax 		0.5
localize_traf_laser_zrand 		0.1
localize_traf_laser_zshort 		0.1


####################################
# Fused Odometry parameters
$module fused_odometry
fused_odometry_num_particles 	500
fused_odometry_frequency		40

fused_odometry_kalman_filter	off

# Theses numbers represent how the first variable varies in relation to the square of the second
# when noise is added in the filtering algorithm
fused_odometry_velocity_noise_velocity	0.1   # standard deviation in meters/s
fused_odometry_velocity_noise_phi		0.0   # standard deviation in degrees
fused_odometry_phi_noise_phi			0.1   # standard deviation in degrees
fused_odometry_phi_noise_velocity		0.02   # standard deviation in degrees
fused_odometry_pitch_v_noise_pitch_v	0.0   # standard deviation in degrees
fused_odometry_pitch_v_noise_velocity	0.0   # standard deviation in degrees

fused_odometry_minimum_speed_for_correction	0.1  # m/s
fused_odometry_maximum_phi				30.0 # in degrees

fused_odometry_xsens_yaw_bias_noise		10.0  # 5.0 # standard deviation in degrees
fused_odometry_xsens_maximum_yaw_bias	30.0 # in degrees

fused_odometry_xsens_roll_std_error		0.0  # 5.0  # in degrees
fused_odometry_xsens_pitch_std_error	0.0  # 2.0  # in degrees
fused_odometry_xsens_yaw_std_error		20.0 # in degrees

fused_odometry_xsens_gps_x_std_error		3.0  # meters
fused_odometry_xsens_gps_y_std_error		3.0  # meters
fused_odometry_xsens_gps_z_std_error		3.0  # meters

fused_odometry_acc_std_error		0.0 # 0.008
fused_odometry_acc_bias_std_error	0.0 # 0.08

fused_odometry_use_viso_odometry	0
fused_odometry_use_car_odometry		1

fused_odometry_publish_particles	off


###############################
# Map Server
$module map_server
map_server_publish_grid_mapping 	on
map_server_initial_waiting_time		3.0
map_server_map_grid_res			0.2 #0.29296875
map_server_map_width			210.0
map_server_map_height			210.0
map_server_time_interval_for_map_change	0.3

#map_server param para escolher publicar google_map no lugar de offline_map

map_server_publish_google_map	off

###############################
# FastSLAM parameters 

fastslam_num_particles				5
fastslam_num_particles_improved		300
fastslam_log_playback_speed			1.0
fastslam_log_time_between_likelihood_maps_update 0.5

fastslam_localize_lmap_std									2.40
fastslam_localize_yaw_uncertainty_due_to_grid_resolution	0.107 # em graus
fastslam_localize_xy_uncertainty_due_to_grid_resolution		0.15  # em metros
fastslam_localize_particles_normalize_factor				0.05
fastslam_gps_correction_factor								1.0   # 0.0 -> sem gps correction, 1.0 -> gps correction forte, >1 -> gps correction maior que a importancia do mapa


###############################
# Mapper parameters 

mapper_min_occupancy_probability	0.5

mapper_number_of_sensors 		26 #velodyne 1, Cameras 9, e os outros lidars 16
mapper_safe_range_above_sensors 	-0.3
mapper_max_velocity_lambda_short_state 	3.0
mapper_height_max_level                 0
mapper_safe_height_from_ground_level1 	0.0

mapper_number_of_threads		1

mapper_unsafe_height_above_ground	10.5
mapper_safe_height_from_ground	-20.0 #parametro eh positivo para ignorar raios a partir da altura apos o chao

# Remover isto deste ini e dos modulos: tekm que usar os dados especificos de cada sensor
mapper_map_locc 		5.0
mapper_map_lfree 		-1.0
mapper_map_l0 			0.0
mapper_map_log_odds_max 	150.0
mapper_map_log_odds_min 	50.0
mapper_map_log_odds_bias 	100.0
mapper_map_range_factor 	1.0

mapper_map_grid_res 		0.2 #0.29296875
mapper_map_width 		210.0
mapper_map_height 		210.0

mapper_map_global_grid_res 	4.0
mapper_map_global_width 	1800
mapper_map_global_height 	1800

mapper_moving_objects_raw_map 	on
mapper_update_cells_below_car 	on

#Numero max de raios que tocaram na celula para cosiderar o merge de mapas-Double pois eh o padrao dos mapa carmen
mapper_rays_threshold_to_merge_between_maps 	 60.0 

mapper_save_map			on

mapper_publish_diff_map				off
mapper_publish_diff_map_interval	0.5 # seconds


###################################################################
#                        ATENTION!
# This Parameters block bellow are just for old releases, Use the "mapper_mapping_mode" for Mapping
################## MAPPER OLD RELEASE START HERE ##################
## Use the parameters below for usual localization and navigation
mapper_update_and_merge_with_snapshot_map		off
mapper_global_map 					off
mapper_merge_with_offline_map 				off
mapper_decay_to_offline_map				on
mapper_update_and_merge_with_mapper_saved_maps	        off
mapper_build_snapshot_map				off
mapper_velodyne_range_max		 		70.0
mapper_velodyne_range_max_factor 			1.0
mapper_create_map_sum_and_count				off
mapper_use_remission					on
mapper_laser_ldmrs 					on
mapper_use_remission_threshold				off

## Use the parameters below for building maps
#mapper_update_and_merge_with_snapshot_map	        off
#mapper_global_map 					off
#mapper_merge_with_offline_map 				off
#mapper_decay_to_offline_map				off
#mapper_update_and_merge_with_mapper_saved_maps	        on
#mapper_build_snapshot_map				off
#mapper_velodyne_range_max		 		70.0
#mapper_velodyne_range_max_factor 			4.0
#mapper_create_map_sum_and_count			off
#mapper_use_remission					on
#mapper_laser_ldmrs 					on
###################### MAPPER OLD RELEASE END HERE ######################

###################################################################
## The parameters below are used with mapper -mapping_mode options
mapper_mapping_mode_off_update_and_merge_with_snapshot_map		off
mapper_mapping_mode_off_global_map 								off
mapper_mapping_mode_off_merge_with_offline_map 					on
mapper_mapping_mode_off_decay_to_offline_map					on
mapper_mapping_mode_off_update_and_merge_with_mapper_saved_maps	off
mapper_mapping_mode_off_build_snapshot_map						off
mapper_mapping_mode_off_velodyne_range_max		 				70.0
mapper_mapping_mode_off_velodyne_range_max_factor 				1.0
mapper_mapping_mode_off_create_map_sum_and_count				off
mapper_mapping_mode_off_use_remission							off
mapper_mapping_mode_off_laser_ldmrs 							on
mapper_mapping_mode_off_use_merge_between_maps					off

mapper_mapping_mode_on_update_and_merge_with_snapshot_map		off
mapper_mapping_mode_on_global_map 								off
mapper_mapping_mode_on_merge_with_offline_map 					off
mapper_mapping_mode_on_decay_to_offline_map						off
mapper_mapping_mode_on_update_and_merge_with_mapper_saved_maps	on
mapper_mapping_mode_on_build_snapshot_map						off
mapper_mapping_mode_on_velodyne_range_max		 				70.0
mapper_mapping_mode_on_velodyne_range_max_factor 				4.0
mapper_mapping_mode_on_create_map_sum_and_count					on
mapper_mapping_mode_on_use_remission							on
mapper_mapping_mode_on_laser_ldmrs 								off
mapper_mapping_mode_on_use_merge_between_maps 					off
###################################################################

mapper_stereo_mapping 			off
mapper_stereo_mapping_locc 		-1.0
mapper_stereo_mapping_lfree 	-5.0

mapper_velodyne 				on
mapper_velodyne_locc 			5.7
mapper_velodyne_lfree 			-0.6
mapper_velodyne_l0 				0.0
mapper_velodyne_unexpeted_delta_range_sigma 			0.45

## Holds the stereo_velodyne1 position
mapper_laser_ldmrs_locc 		7.3
mapper_laser_ldmrs_lfree 		-0.6
mapper_laser_ldmrs_l0 			0.0
mapper_laser_ldmrs_unexpeted_delta_range_sigma 			0.45

mapper_stereo_velodyne2 		off
mapper_stereo_velodyne2_locc 	5.0
mapper_stereo_velodyne2_lfree 	-5.0
mapper_stereo_velodyne2_l0 		0.0
mapper_stereo_velodyne2_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne3 		off
mapper_stereo_velodyne3_locc	2.0
mapper_stereo_velodyne3_lfree	-10.0
mapper_stereo_velodyne3_l0		-1.3
mapper_stereo_velodyne3_unexpeted_delta_range_sigma 	0.2

mapper_stereo_velodyne4 		off
mapper_stereo_velodyne4_locc	5.0
mapper_stereo_velodyne4_lfree	-5.0
mapper_stereo_velodyne4_l0		0.0
mapper_stereo_velodyne4_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne5			off
mapper_stereo_velodyne5_locc	5.0
mapper_stereo_velodyne5_lfree	-5.0
mapper_stereo_velodyne5_l0 		0.0
mapper_stereo_velodyne5_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne6			off
mapper_stereo_velodyne6_locc	5.0
mapper_stereo_velodyne6_lfree	-5.0
mapper_stereo_velodyne6_l0		0.0
mapper_stereo_velodyne6_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne7			off
mapper_stereo_velodyne7_locc	5.0
mapper_stereo_velodyne7_lfree	-5.0
mapper_stereo_velodyne7_l0		0.0
mapper_stereo_velodyne7_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne8			off
mapper_stereo_velodyne8_locc	5.0
mapper_stereo_velodyne8_lfree	-5.0
mapper_stereo_velodyne8_l0		0.0
mapper_stereo_velodyne8_unexpeted_delta_range_sigma 	6.0

mapper_stereo_velodyne9			off
mapper_stereo_velodyne9_locc	5.0
mapper_stereo_velodyne9_lfree	-5.0
mapper_stereo_velodyne9_l0		0.0
mapper_stereo_velodyne9_unexpeted_delta_range_sigma 	6.0

######################################
#Mapper_Lidars parameters

#Velodyne publicando variable_scan
mapper_lidar0                              off
mapper_lidar0_locc                         5.7
mapper_lidar0_lfree                       -0.6
mapper_lidar0_l0                           0.0
mapper_lidar0_unexpeted_delta_range_sigma  0.45

mapper_lidar1                              off
mapper_lidar1_locc                         5.7
mapper_lidar1_lfree                       -0.6
mapper_lidar1_l0                           0.0
mapper_lidar1_unexpeted_delta_range_sigma  0.45

mapper_lidar2                              off
mapper_lidar2_locc                         5.7
mapper_lidar2_lfree                       -0.6
mapper_lidar2_l0                           0.0
mapper_lidar2_unexpeted_delta_range_sigma  0.45

mapper_lidar3                              off
mapper_lidar3_locc                         5.7
mapper_lidar3_lfree                       -0.6
mapper_lidar3_l0                           0.0
mapper_lidar3_unexpeted_delta_range_sigma  0.45

mapper_lidar4        off
mapper_lidar4_locc   0.0
mapper_lidar4_lfree  0.0
mapper_lidar4_l0     0.0
mapper_lidar4_unexpeted_delta_range_sigma   0.0

mapper_lidar5        off
mapper_lidar5_locc   0.0
mapper_lidar5_lfree  0.0
mapper_lidar5_l0     0.0
mapper_lidar5_unexpeted_delta_range_sigma   0.0

mapper_lidar6        off
mapper_lidar6_locc   0.0
mapper_lidar6_lfree  0.0
mapper_lidar6_l0     0.0
mapper_lidar6_unexpeted_delta_range_sigma   0.0

mapper_lidar7        off
mapper_lidar7_locc   0.0
mapper_lidar7_lfree  0.0
mapper_lidar7_l0     0.0
mapper_lidar7_unexpeted_delta_range_sigma   0.0

mapper_lidar8        off
mapper_lidar8_locc   5.7
mapper_lidar8_lfree  -0.6
mapper_lidar8_l0     0.0
mapper_lidar8_unexpeted_delta_range_sigma   0.45
mapper_lidar8_ray_index_difference 	15	# playback vel 0.1 #line 1437 prob_map.cpp
mapper_lidar8_use_index_difference on

mapper_lidar9        off
mapper_lidar9_locc   0.0
mapper_lidar9_lfree  0.0
mapper_lidar9_l0     0.0
mapper_lidar9_unexpeted_delta_range_sigma   0.0

mapper_lidar10        off
mapper_lidar10_locc   0.0
mapper_lidar10_lfree  0.0
mapper_lidar10_l0     0.0
mapper_lidar10_unexpeted_delta_range_sigma   0.0

mapper_lidar11        off
mapper_lidar11_locc   0.0
mapper_lidar11_lfree  0.0
mapper_lidar11_l0     0.0
mapper_lidar11_unexpeted_delta_range_sigma   0.0

mapper_lidar12        off
mapper_lidar12_locc   0.0
mapper_lidar12_lfree  0.0
mapper_lidar12_l0     0.0
mapper_lidar12_unexpeted_delta_range_sigma   0.0

mapper_lidar13        off
mapper_lidar13_locc   0.0
mapper_lidar13_lfree  0.0
mapper_lidar13_l0     0.0
mapper_lidar13_unexpeted_delta_range_sigma   0.0

mapper_lidar14        off
mapper_lidar14_locc   0.0
mapper_lidar14_lfree  0.0
mapper_lidar14_l0     0.0
mapper_lidar14_unexpeted_delta_range_sigma   0.0

mapper_lidar15        off
mapper_lidar15_locc   0.0
mapper_lidar15_lfree  0.0
mapper_lidar15_l0     0.0
mapper_lidar15_unexpeted_delta_range_sigma   0.0


######################################
# Obstacle distance mapper
$module obstacle_distance_mapper
obstacle_distance_mapper_publish_moving_objects			on
obstacle_distance_mapper_min_moving_object_velocity		1.0 	# m/s
obstacle_distance_mapper_max_moving_object_velocity		50.0 	# m/s
obstacle_distance_mapper_moving_object_merge_distance 	0.25 	# m


######################################
# Stereo Mapping parameters
$module stereo_map
stereo_map_width			64.0 # 50.0
stereo_map_height			48.0 # 30.0
stereo_map_grid_res			0.2
stereo_map_locc 			5
stereo_map_lfree 			-5
stereo_map_l0 				0
stereo_map_log_odds_max 		224
stereo_map_log_odds_min 		32
stereo_map_log_odds_bias 		8
stereo_map_frontal_camera		8
stereo_map_laser_num_beams		361


#######################
##### Navigation ######
#######################

###############################
# Navigator parameters

navigator_ackerman_use_fused_odometry_pose on
navigator_goal_size			1.0
navigator_goal_theta_tolerance		0.3

navigator_map_update_radius             3.0
navigator_map_update_obstacles          off
navigator_map_update_freespace 	  	off
navigator_map_update_num_laser_beams    361
navigator_replan_frequency		5
navigator_smooth_path			off
navigator_dont_integrate_odometry	off
navigator_plan_to_nearest_free_point    on
navigator_waypoint_tolerance            1.0

navigator_map 				from_mapping #from_param_daemon #from_param_daemon #from_mapping
navigator_superimposed_map		from_map_server


###############################
# Navigator A* parameters
$module navigator_astar
navigator_astar_path_interval				1.0	# deslocamento em metros de cada passo do A*
navigator_astar_state_map_resolution		3 	# Inteiro que indica o tamanho de uma celula do mapa do A* (medido como o numero de celulas do mapa carmen; se igual, o lado do mapa do A* tem o mesmo tamanho do lado do mapa carmen; se igual a dois, metade, etc.)  
navigator_astar_state_map_theta_resolution	45
navigator_astar_precomputed_cost_size		200
navigator_astar_precomputed_cost_file_name	precomp_ackerman_100_phi20_r0.2_i0.01_center.data # precomp_ackerman_200_phi27_r0.2_i0.01.data #precomp_ackerman_100_r0.2_i0.01_center.data
navigator_astar_use_rs						off
navigator_astar_smooth_path					off
navigator_astar_path_smoothing_obstacles_safe_distance	0.6 # tem que ser igual ao model_predictive_planner_obstacles_safe_distance?
navigator_astar_onroad_max_plan_time		6.0
navigator_astar_robot_fat_space				0.6	# Tem que ser igual a model_predictive_planner_obstacles_safe_distance. Distancia minima aceitavel do novo modelo de ocupacao do robo para obstaculos (menor que essa eh sinalisada colisao)
navigator_astar_max_phi_multiplier			0.6 # reducao de robot_max_phi
$module motion_planner
motion_planner_phi_gain				1.5

###############################
# Path_planner_astar parameters
$module path_planner_astar
path_planner_astar_state_map_resolution		1.0
path_planner_astar_state_map_theta_resolution	36
path_planner_astar_precomputed_cost_size	100
path_planner_astar_precomputed_cost_theta_size	72
path_planner_astar_precomputed_cost_resolution	0.2
path_planner_astar_precomputed_cost_file_name	../data/cost_matrix_02_101x101x72.data
path_planner_astar_use_matrix_cost_heuristic	on
path_planner_astar_max_steering_angle		0.45
path_planner_astar_min_dist_motion_change	3.0 	# distancia minima aceitavel para mudar de direcao; em metros; 0 para desativar


###############################
# RRT Planner
 
rrt_distance_interval			3.5
rrt_plan_time					0.03
rrt_timeout						0.05
rrt_cheat						off
rrt_show_debug_info				off
rrt_publish_lane_map			off
rrt_publish_tree				on
rrt_use_obstacle_avoider		on
rrt_use_mpc						off	      # First in precedence, case off standard use PID
rrt_use_rlpid					off	      # Second in precedence, case off standard use PID
rrt_use_pure_pursuit_tracking	off
rrt_reuse_last_path				on
rrt_obstacle_cost_distance		0.8     # distancia em metros de um obstaculo em que o custo vai a zero
rrt_obstacle_probability_threshold 0.5
rrt_log_mode					off


###############################
# Offroad Planner parameters
$module offroad_planner
offroad_planner_state_map_resolution		1.0
offroad_planner_state_map_theta_resolution	37	# em quantos niveis o theta eh dividido (theta vai de -pi a pi, e este intervalo eh discretizado em offroad_planner_state_map_theta_resolution passos) 
offroad_planner_state_map_beta_resolution	9	# em quantos niveis o beta eh dividido (beta vai de -semi_trailerX_max_beta a semi_trailerX_max_beta, e este intervalo eh discretizado em offroad_planner_state_map_beta_resolution passos)
offroad_planner_precomputed_cost_size		101.0 # em metros
offroad_planner_precomputed_cost_theta_size	36 # tem que ser par para incluir os thetas de 0 grau e 180 graus 
offroad_planner_precomputed_cost_resolution	1.0 # em metros (offroad_planner_precomputed_cost_size / offroad_planner_precomputed_cost_resolution) tem que ser impar
offroad_planner_precomputed_cost_file_name	../data/offroad_planner_car_cost_matrix_101x36x1.0.data
offroad_planner_use_matrix_cost_heuristic	on
offroad_planner_use_matrix_cost_trailer_heuristic	on
offroad_planner_precomputed_cost_trailer_size		81.0 # em metros
offroad_planner_precomputed_cost_trailer_theta_size	9 # Tem que ser impar
offroad_planner_precomputed_cost_trailer_beta_size	5 # Tem que ser impar 
offroad_planner_precomputed_cost_trailer_resolution	1.0
offroad_planner_precomputed_cost_trailer_file_name	../data/offroad_planner_iara_trailer_cost_matrix_81x10x5x1.0.data
offroad_planner_min_dist_motion_change	3.0 	# distancia minima aceitavel para mudar de direcao; em metros; 0 para desativar
offroad_planner_path_smoothing_obstacles_safe_distance	0.6 # tem que ser igual ao model_predictive_planner_obstacles_safe_distance?
offroad_planner_max_phi_multiplier			0.8 # reducao de robot_max_phi
offroad_planner_smooth_path					off
offroad_planner_penalties_w1	1.0 	# custo de andar de reh
offroad_planner_penalties_w2	25.0  	# custo de mudar de direcao
offroad_planner_penalties_w3	30.0	# custo de proximacao com obstaculo
offroad_planner_penalties_w4	10.0	# custo de distancia para lane
offroad_planner_penalties_w5	5.0		# custo de phi diferente de zero
offroad_planner_min_distance_to_lane	5.0
offroad_planner_use_rs_with_trailer	off
offroad_planner_smoothness_w1	20.0
offroad_planner_smoothness_w2	30.0
offroad_planner_smoothness_w3	10.0
offroad_planner_smoothness_w4	15.0
offroad_planner_smoothness_w5	20.0
offroad_planner_eliminate_path_follower 1
point_cloud_odometry_using_fake_gps	0


###############################
# Model Predictive Planner parameters

# Ida a Guarapari = 0.233. Volta da Ufes = 0.6
$module model_predictive_planner
model_predictive_planner_obstacles_safe_distance					0.6  # este valor eh somado aos raios dos circulos que definem o modelo de colisao do robo (ver parametro robot_collision_file)  
model_predictive_planner_obstacles_safe_length_distance  			5.63 # NAO USADO 
model_predictive_planner_max_square_distance_to_lane				2.0  # NAO USADO
model_predictive_planner_w1_end_of_path_to_goal_distance          	20.0 # 30.0 # 10.0 # 30.0
model_predictive_planner_w2_end_of_path_to_goal_angular_distance  	15.0 # 5.0 # 35.0 # 15.0
model_predictive_planner_w3_end_of_path_to_goal_delta_theta       	15.0 # 10.0 # 15.0 # 30.0 # 15.0
model_predictive_planner_w4_path_to_lane_distance                	5.0  # 5.0 # 3.0  # 15.0 # 3.0
model_predictive_planner_w5_proximity_to_obstacles                	20.0 # 10.0 # 20.0
model_predictive_planner_w6_traveled_distance                     	20.1 # 0.0 # 0.0025 # 0.0  # 0.0025
#model_predictive_planner_w7_look_ahead_error						0.0 #
#model_predictive_planner_look_ahead_horizon							2.0 #

model_predictive_planner_eliminate_path_follower				  	on
model_predictive_planner_eliminate_path_follower_transition_v	  	100.0 # 4.16666 # 15 km/h
model_predictive_planner_robot_velocity_delay					  	0.46 # s
model_predictive_planner_robot_min_v_distance_ahead				  	0.05 # m. Distancia minima aa frente no plano para pegar a velocidade. Importante quando esta parado
model_predictive_planner_robot_steering_delay					  	0.46 # s
model_predictive_planner_robot_min_s_distance_ahead				  	0.0 # m. Distancia minima aa frente no plano para pegar o angule de steering. Importante quando esta parado


###############################
# Obstacle Avoider parameters
$module obstacle_avoider
obstacle_avoider_obstacles_safe_distance						0.1   # este valor eh somado aos raios dos circulos que definem o modelo de colisao do robo (ver parametro robot_collision_file)
 
###############################
# Behavior Selector parameters
$module behavior_selector
behavior_selector_use_symotha	off

# Ida a Guarapari = 1.233. Volta da Ufes = 1.6
# Those safe_distances were NOT changed from radius to safe distance
behavior_selector_central_lane_obstacles_safe_distance			1.6 # (0.6 + 1.0) deve ser igual a model_predictive_planner_obstacles_safe_distance + o raio dos circulos que definem o modelo de colisao do robo (ver parametro robot_collision_file)
behavior_selector_main_central_lane_obstacles_safe_distance		1.1 # (0.1 + 1.0) deve ser igual a obstacle_avoider_obstacles_safe_distance + o raio dos circulos que definem o modelo de colisao do robo (ver parametro robot_collision_file)
behavior_selector_lateral_lane_obstacles_safe_distance			1.1 # (0.1 + 1.0) deve ser igual a obstacle_avoider_obstacles_safe_distance + o raio dos circulos que definem o modelo de colisao do robo (ver parametro robot_collision_file)
behavior_selector_lateral_lane_displacement						2.2 # deve ser a soma dos dois anteriores

behavior_selector_annotation_safe_distance_multiplier			0.3  # multiplica model_predictive_planner_obstacles_safe_distance quando proximo a cancelas

behavior_selector_distance_between_waypoints		10.0
behavior_selector_change_goal_distance				10.0

####
## Possible Planners:
## 0	gradient planner
## 1	a star planner
## 2	rrt planner

behavior_selector_reverse_driving               on

behavior_selector_following_lane_planner		0
behavior_selector_parking_planner				1
#Goal Source - if on will use Lane and Goal from path_planner, if off use RDDF
behavior_selector_goal_source_path_planner		off

behavior_selector_distance_to_remove_annotation_goal	4.0

behavior_selector_rddf_num_poses_ahead_limit			150 # mapa_lenth_in_meters/min_distance_between_waypoints => 75/0.5
behavior_selector_rddf_num_poses_ahead_min				50
behavior_selector_rddf_num_poses_by_car_velocity		off

behavior_selector_use_truepos							off
behavior_selector_keep_speed_limit						on

behavior_selector_goal_velocity_tuning_factor			1.8

behavior_selector_in_path_longitudinal_safety_margin					5.0 # m, aumenta o custo computacional do behavior_selector
behavior_selector_in_path_longitudinal_safety_margin_with_v_multiplier	0.0
behavior_selector_in_lane_longitudinal_safety_margin					0.0 # m
behavior_selector_in_lane_longitudinal_safety_margin_with_v_multiplier	0.0

behavior_selector_distance_to_moving_object_with_v_multiplier	4.0
behavior_selector_distance_between_waypoints_with_v_multiplier	4.0

behavior_selector_performs_path_planning			on

behavior_selector_check_pedestrian_near_path						off # Para se o pedestre estiver nos ranges abaixo
behavior_selector_pedestrian_near_path_min_lateral_distance			4.0	# m, a partir do ponto no rddf aa frente mais proximo do pedestre
behavior_selector_pedestrian_near_path_min_longitudinal_distance	5.0	# m, da frente do carro ate o ponto no rddf aa frente mais proximo do pedestre

######################################
# Rddf parameters

rddf_num_poses_ahead				100
rddf_min_distance_between_waypoints 0.5
rddf_lateral_offset_noise			0.1
rddf_lateral_offset_error			0.1
rddf_lateral_offset_particles		1000
rddf_loop							on
rddf_source_tracker					off
rddf_default_search_radius			1.00
rddf_dynamic_plot_state				0


######################################
# Frenet path planner parameters
$module frenet_path_planner
frenet_path_planner_use_frenet_path_planner 		on
frenet_path_planner_use_unity_simulator 		off
frenet_path_planner_num_paths					7 # 13 # 11  # 7   # 3 # must be odd
frenet_path_planner_paths_displacement			0.4 # 1.4 # 4.2 # in meters
frenet_path_planner_max_plan_size				7.0 # in meters at v = 0.0
frenet_path_planner_max_plan_size_increase_factor	4.0  # by how much frenet_path_planner_max_plan_size increase with the robot speed
														 # -> frenet_path_planner_max_plan_size = frenet_path_planner_max_plan_size + v * frenet_path_planner_max_plan_size_increase_factor
frenet_path_planner_max_derivative_distance			0.01  # as a fraction of the frenet_path_planner_max_plan_size -> nao funciona com polinomio quintico
frenet_path_planner_time_horizon					8.0  # in seconds
frenet_path_planner_delta_t							0.05 # in seconds


######################################
# Route planner parameters
$module route_planner
route_planner_use_route_planner 			on
route_planner_in_graph_mode					on


######################################
# trackstar load axle control parameters
trackstar_load_axle_distance_to_implement	5.0


######################################
# Moving Objects parameters
$module moving_objects
moving_objects_safe_range_above_sensors		-0.3


######################################
# Base Ackerman parameters
$module base_ackerman
base_ackerman_publish_combined_odometry	off # Tem que estar em sintonia com a robot_publish_combined_odometry. Para calibracao de odometria de logs esta flags pode ser ativada para misturar odometria visual com a do robo 

######################################
# Railway Anticolision System parameters
$module railway_anti_collision_system
railway_anti_collision_system_red_alert_dir			stadler_mrs/red_Alert.png
railway_anti_collision_system_orange_alert_dir 		stadler_mrs/orange_Alert.png
railway_anti_collision_system_yellow_alert_dir 		stadler_mrs/yellow_Alert.png
railway_anti_collision_system_red_alert_obstacles_dir			stadler_mrs/red_Alert_obstacles.png
railway_anti_collision_system_orange_alert_obstacles_dir 		stadler_mrs/orange_Alert_obstacles.png
railway_anti_collision_system_yellow_alert_obstacles_dir 		stadler_mrs/yellow_Alert_obstacles.png
railway_anti_collision_system_gray_square 			stadler_mrs/gray_square.png
railway_anti_collision_system_obstacles_safe_distance	1.0


##################
##### Robot ######
##################
$include carmen-ford-escape-sensorbox-include-vehicle.ini


################################
#    road finding params
################################
$module road_finding
road_finding_number_of_gaussians	4

################################
#    v-disparity params
################################
$module v_disparity
v_disparity_slope_threshould	95.0

############################### 
# car parameters

# car position and orientation in relation to world
car_x			0.0
car_y			0.0
car_z			0.28	# TODO: ler isso do robot
car_roll		0.0
car_pitch		0.0
car_yaw			0.0

######################################
# visual odometry parameters
######################################

# To replace the robot odometry (IARAs odometry) with visual_odometry turn off <robot_publish_odometry> parameter below
$module visual_odometry
visual_odometry_is_global_pos		off

visual_odometry_publish				off		# Habilita a publicacao de carmen_robot_ackerman_velocity_message

visual_odometry_v_multiplier           1.0 # 1.007528 # 1.007528 # 0.938107
visual_odometry_phi_multiplier         1.0 # 1.114414 # 1.057797
visual_odometry_phi_bias               0.0  #-0.001268 # -0.000249


######################################
# lidar odometry (lidarodom) parameters
######################################

# To replace the robot odometry (IARAs odometry) with lidar odometry turn off <robot_publish_odometry> parameter below

lidarodom_publish									on		# Habilita a publicacao de carmen_robot_ackerman_velocity_message

lidarodom_map_width									70.0	# 210 (map_server_map_width) / 3
lidarodom_map_height								70.0	# 210 (map_server_map_height) / 3
lidarodom_map_center_x								35.0  	# 70 / 2
lidarodom_map_center_y								35.0  	# 70 / 2
lidarodom_v_uncertainty_at_zero_v					0.1 	# desvio padrao do ruido gaussiano adicionado a v mesmo quando em zero v
lidarodom_xy_uncertainty_due_to_grid_resolution		0.03 	# em metros
lidarodom_yaw_uncertainty_due_to_grid_resolution	0.321	# em graus
lidarodom_use_imu_angular_velocity_to_get_phi		off


##############################
# grid mapping map parameters
$module grid_mapping
grid_mapping_map_range_factor 	1.0
grid_mapping_map_grid_res 	0.2
grid_mapping_map_width 		210
grid_mapping_map_height 	210
grid_mapping_laser_sampling_step 	36
grid_mapping_laser_num_beams 	361
grid_mapping_laser_fov_range 	180.0
grid_mapping_laser_max_range 	31.0
grid_mapping_laser_lambda_short 	1.0
grid_mapping_laser_sigma_zhit 	0.1
grid_mapping_laser_zhit 		0.3
grid_mapping_laser_zmax 		0.5
grid_mapping_laser_zrand 		0.1
grid_mapping_laser_zshort 	0.1

grid_mapping_laser_locc 	5.0
grid_mapping_laser_lfree	-1.0
grid_mapping_laser_l0		0

##############################
# ultrasonic sensor parameters

grid_mapping_ultrasonic_sensor_sampling_step	0.001745
grid_mapping_ultrasonic_sensor_num_beams	36
grid_mapping_ultrasonic_sensor_fov_range	18.0
grid_mapping_ultrasonic_sensor_max_range	3.0
grid_mapping_ultrasonic_sensor_lambda_short	0.1
grid_mapping_ultrasonic_sensor_sigma_zhit	0.1
grid_mapping_ultrasonic_sensor_zhit	0.1
grid_mapping_ultrasonic_sensor_zmax	0.1
grid_mapping_ultrasonic_sensor_zrand	0.1
grid_mapping_ultrasonic_sensor_zshort	0.1

grid_mapping_map_locc 		-150.0
grid_mapping_map_lfree 		5.0
grid_mapping_map_l0 		0
grid_mapping_map_log_odds_max 	50
grid_mapping_map_log_odds_min 	-50
grid_mapping_map_log_odds_bias 	0

# front
$module ultrasonic_sensor_r1
ultrasonic_sensor_r1_x	3.455
ultrasonic_sensor_r1_y	-0.435
ultrasonic_sensor_r1_z	0.193
ultrasonic_sensor_r1_yaw	0.0
ultrasonic_sensor_r1_pitch	0.0
ultrasonic_sensor_r1_roll	0.0

# side (front)
$module ultrasonic_sensor_r2
ultrasonic_sensor_r2_x	2.145
ultrasonic_sensor_r2_y	-0.89
ultrasonic_sensor_r2_z	0.004
ultrasonic_sensor_r2_yaw	-1.57079633
ultrasonic_sensor_r2_pitch	0.0
ultrasonic_sensor_r2_roll	0.0

# side (back)
$module ultrasonic_sensor_l2
ultrasonic_sensor_l2_x	0.477
ultrasonic_sensor_l2_y	-0.89
ultrasonic_sensor_l2_z	0.004
ultrasonic_sensor_l2_yaw	-1.57079633
ultrasonic_sensor_l2_pitch	0.0
ultrasonic_sensor_l2_roll	0.0

# back
$module ultrasonic_sensor_l1
ultrasonic_sensor_l1_x	-0.92
ultrasonic_sensor_l1_y	-0.455
ultrasonic_sensor_l1_z	0.188
ultrasonic_sensor_l1_yaw	-3.14159265
ultrasonic_sensor_l1_pitch	0.0
ultrasonic_sensor_l1_roll	0.0



################################################################################################
##
##  Expert parameters
##

[expert]

####################
##### Sensors ######
####################
$include carmen-ford-escape-sensorbox-include-sensors.ini


###############################
# Traffic light parameters

#--------- Traffic light ------------
$module traffic_light
traffic_light_use_squeezenet 	on
traffic_light_gpu_mode 			on
traffic_light_gpu_device_id 	0	


###############################
# Traffic light view parameters

#--------- Traffic light view ------------
traffic_light_viewer_width	640


#######################
####### Filters #######
#######################

#--------- stereo 3 ------------

stereo3_width   		1280 # 640 # 1280 # 
stereo3_height   		960 # 480 # 960 #  
stereo3_max_disparity  	100
stereo3_smoothing_kernel_size 15

#stereo3_algorithm VGRAM
#stereo3_algorithm CSBP
stereo3_algorithm ELAS

stereo3_gaussian_radius 7.0
stereo3_synapses 128

stereo3_wintakeiteration 3
stereo3_numdisparity 48 # 36
stereo3_numthreads 8

stereo3_scalew 	1280 # 640 # 1280 #  
stereo3_scaleh  960 # 480 # 960 # 

stereo3_vertical_ROI_ini 0 # 150 # 0
stereo3_vertical_ROI_end 960 # 480 # 350 # 375 # 750

stereo3_horizontal_ROI_ini 0
stereo3_horizontal_ROI_end 1280 # 640 # 1280 # 

#--------- stereo 4 - ZED ------------

stereo4_width  1920 # 1280 # 640 
stereo4_height  1080 # 960 # 480 
stereo4_max_disparity  128
stereo4_smoothing_kernel_size 15

stereo4_scalew 1280 # 640 
stereo4_scaleh 960 # 480 

#--------- stereo 6 ------------

stereo6_width  1280
stereo6_height   960
stereo6_max_disparity  128
stereo6_smoothing_kernel_size 15

#stereo6_algorithm VGRAM
#stereo6_algorithm CSBP
stereo6_algorithm ELAS

stereo6_gaussian_radius 10.0
stereo6_synapses 256

stereo6_wintakeiteration 1
stereo6_numdisparity 36
stereo6_numthreads 8

stereo6_scalew 1280
stereo6_scaleh 960

stereo6_vertical_ROI_ini 0
stereo6_vertical_ROI_end 960

stereo6_horizontal_ROI_ini 0
stereo6_horizontal_ROI_end 1280

#--------- stereo 7 - RealSense ------------

stereo7_width 640 
stereo7_height 480 
stereo7_max_disparity  128
stereo7_smoothing_kernel_size 15

stereo7_scalew 640 
stereo7_scaleh 480 

#--------- stereo 8 ------------

stereo8_width  640 # 1280
stereo8_height   480 # 960
stereo8_max_disparity  128 # 256
stereo8_smoothing_kernel_size 15
stereo8_range_max 50.0

#stereo8_algorithm VGRAM
#stereo8_algorithm CSBP
stereo8_algorithm ELAS

stereo8_gaussian_radius 10.0
stereo8_synapses 256

stereo8_wintakeiteration 1
stereo8_numdisparity 128 # 256
stereo8_numthreads 8

stereo8_scalew 640 # 1280
stereo8_scaleh 480 # 960

stereo8_vertical_ROI_ini 150 # 300
stereo8_vertical_ROI_end 350 # 700

stereo8_horizontal_ROI_ini 0
stereo8_horizontal_ROI_end 640 # 1280


############################
# Stereo Velodyne Parameters
############################

#--------- Stereo Velodyne 3------------
$module stereo_velodyne3
stereo_velodyne3_num_points_cloud 1 
stereo_velodyne3_flipped off

stereo_velodyne3_horizontal_resolution 	1280 # 640 # 320 # 640 # 320
stereo_velodyne3_vertical_resolution 	240 # 120 # 240 # 480 # 100
stereo_velodyne3_range_max 				50.0 # 10.0

stereo_velodyne3_horizontal_roi_ini 0
stereo_velodyne3_horizontal_roi_end 1280 # 640 # 1280 # 640
stereo_velodyne3_vertical_roi_ini 	0 # 30 # 0
stereo_velodyne3_vertical_roi_end 	700 # 350 # 960 # 460

#--------- Stereo Velodyne 7 (Realsense)------------
$module stereo_velodyne7
stereo_velodyne7_num_points_cloud 1 
stereo_velodyne7_flipped off

stereo_velodyne7_horizontal_resolution 	640
stereo_velodyne7_vertical_resolution 	480
stereo_velodyne7_range_max 				2.0

stereo_velodyne7_horizontal_roi_ini 0
stereo_velodyne7_horizontal_roi_end 640
stereo_velodyne7_vertical_roi_ini 	0
stereo_velodyne7_vertical_roi_end 	480

#--------- Stereo Velodyne 8------------
$module stereo_velodyne8
stereo_velodyne8_num_points_cloud 1
stereo_velodyne8_flipped off

stereo_velodyne8_vertical_resolution 120
stereo_velodyne8_horizontal_resolution 320
stereo_velodyne8_range_max 50.0

stereo_velodyne8_horizontal_roi_ini 0
stereo_velodyne8_horizontal_roi_end 1280
stereo_velodyne8_vertical_roi_ini 	200 # 0
stereo_velodyne8_vertical_roi_end 	660 # 960

###############################
# camera position and orientation in relation to car

#----------- Camera 1 (LASER SICK) ------------

camera1_x		3.5
camera1_y		0.0
camera1_z		0.2
camera1_roll		0.0
camera1_pitch  		0.0	# 0.0 #0.0263
camera1_yaw		0.0

#----------- Camera 8 ------------

camera8_x		0.245
camera8_y		-0.287
camera8_z		0.085
camera8_roll	0.0
camera8_pitch  0.09	# 0.0 #0.0263
camera8_yaw		0.0

#----------- Camera 2 ------------

camera2_x		0.23
camera2_y		0.0
camera2_z		0.127
camera2_roll	0.0
camera2_pitch	-0.026180
camera2_yaw		-0.008727

#----------- Camera 3 ------------

camera3_x		0.245   	#0.130 		#teste do tracker 0.25			# 0.325 			# 1.23
camera3_y		-0.04		#0.149		# -0.28
camera3_z		0.210 		#0.214 			#0.146			# 1.13
camera3_roll	-0.017453 		# -0.017453 	#0.0		# 0.0
camera3_pitch	0.026037		# -0.034907 	#0.0		# 0.053
camera3_yaw		-0.023562 		# -0.017453	#0.0 		#0.5585			# 0.09

#----------- Camera 4 - ZED ------------

camera4_x		0.395000
camera4_y		0.023000
camera4_z		-0.185000
camera4_roll	0.026180
camera4_pitch  0.020186
camera4_yaw		0.026180

#----------- Camera 5 ------------

camera5_x		-0.175000 			# 1.23
camera5_y		-0.180000 			# -0.28
camera5_z		0.215000 			# 1.13
camera5_roll	-0.008726 			# 0.0
camera5_pitch	0.026037			# 0.053
camera5_yaw		3.1216			    # 0.09
 
#----------- Camera 7 - RealSense ------------

camera7_x       0.0 #3.0
camera7_y       -0.040000 #0.0
camera7_z       0.2130000 #-0.9
camera7_roll    -0.008726 #0
camera7_pitch   -0.008584 #2.09
camera7_yaw     -1.606615 #-1.685155

#----------- Camera 9 ------------

camera9_x		0.0
camera9_y		-0.040000
camera9_z		0.2130000
camera9_roll		-0.008726
camera9_pitch		-0.008584
camera9_yaw		1.624068

#----------- Camera 10 VIP 3220 Camera 1 ------------

camera10_x		0.0
camera10_y		0.0
camera10_z		0.0
camera10_roll		0.0
camera10_pitch		0.0
camera10_yaw		0.0

#----------- Camera 11 VIP 1020 Camera 2 ------------

camera11_x       0.0
camera11_y       -0.040000
camera11_z       0.2130000
camera11_roll    -0.008726
camera11_pitch   -0.008584
camera11_yaw     -1.606615 #-1.685155

#----------- Camera 12 VIP 1020 Camera 3 ------------

camera12_x		0.0
camera12_y		-0.040000
camera12_z		0.2130000
camera12_roll		-0.008726
camera12_pitch		-0.008584
camera12_yaw		1.624068


###############################
# Visual Tracker OpenTLD parameters
###############################
$module tracker_opentld
tracker_opentld_view_width			1280 #640
tracker_opentld_view_height			960 #480
tracker_opentld_confidence_threshold		0.5 #Confidence detection threshold
tracker_opentld_detector_minScale		-10 #number of scales smaller than initial object size
tracker_opentld_detector_maxScale		10 #number of scales larger than initial object size
tracker_opentld_detector_numFeatures		15 #number of features
tracker_opentld_detector_minSize		25 #minimum size of scanWindows
tracker_opentld_detector_thetaP			0.65
tracker_opentld_detector_thetaN			0.5

#######################
##### Interfaces ######
#######################


###############################
# navigator_gui parameter
$module navigator_panel
navigator_panel_initial_map_zoom		100.0
navigator_panel_track_robot			on
navigator_panel_draw_waypoints			off
navigator_panel_draw_robot_waypoints		off
navigator_panel_draw_path			on
navigator_panel_show_particles			on
navigator_panel_show_gaussians			off
navigator_panel_show_true_pos			on
navigator_panel_show_tracked_objects		on
navigator_panel_show_laser			off
navigator_panel_show_simulator_objects		off
navigator_panel_show_command_plan		on
navigator_panel_show_nearby_lanes		on
navigator_panel_show_path_plans			on
navigator_panel_show_oa_motion_plan		on
navigator_panel_show_mpp_motion_plan		on
navigator_panel_show_offroad_plan		on
navigator_panel_show_dynamic_objects		on
navigator_panel_show_dynamic_points		on
navigator_panel_show_annotations		on
navigator_panel_show_lane_markings		off
navigator_panel_show_collision_range		off
navigator_panel_exploration_mode		off
navigator_panel_use_ackerman			on
navigator_panel_localize_std_x			0.5
navigator_panel_localize_std_y			0.5
navigator_panel_localize_std_theta		5.0 # in degrees
navigator_panel_map				Costs # Map # Costs # Map # Offline Map # Map
navigator_panel_superimposed_map		None # Offline Map
navigator_panel_publish_map_view		on
navigator_panel_publish_map_view_interval	0.5 # seconds
navigator_panel_window_width			1000
navigator_panel_window_height			600
navigator_panel_window_x			0
navigator_panel_window_y			0
navigator_panel_missions_folder	missions/
navigator_panel_publish_final_goal_at_place_of_interest	on


###############################
# robot_gui parameters

robotgui_connect_distance		40.0
robotgui_gui_control			on
robotgui_show_velocity			off
robotgui_show_vector			on


###############################
# viewer_3D parameters
$module viewer_3D
viewer_3D_background_red		1.0
viewer_3D_background_green		1.0
viewer_3D_background_blue		1.0

viewer_3D_point_size			1
viewer_3D_ldmrs_size			3
viewer_3D_ldmrs_min_velocity	1.0
viewer_3D_laser_size			1
viewer_3D_velodyne_size			1
viewer_3D_odometry_size 		50
viewer_3D_gps_size 				5000
viewer_3D_localize_ackerman_size	5000
viewer_3D_stereo_point_cloud_size	10
viewer_3D_camera_square_size	3
viewer_3D_publish_map_view			on
viewer_3D_publish_map_view_interval	0.5 # seconds
viewer_3D_window_width			1000
viewer_3D_window_height			600
viewer_3D_window_x			-1
viewer_3D_window_y			-1


# car model position and orientation in relation to the car
carmodel_file_name      ford_escape_model.obj
carmodel_x		1.2	# TODO: mudar nome para viewer_3D...
carmodel_y		0.0
carmodel_z		0.28
carmodel_roll		0.0
carmodel_pitch		0.0
carmodel_yaw		0.0
carmodel_size_x		4.437
carmodel_size_y		4.437
carmodel_size_z		4.437

$module semi_trailer
semi_trailer_model1_file_name  	    ford_escape/trailer-cargo.obj
semi_trailer_model1_x				1.85
semi_trailer_model1_y				0.0
semi_trailer_model1_z				0.2
semi_trailer_model1_roll			0.0
semi_trailer_model1_pitch			0.0
semi_trailer_model1_yaw				0.0
semi_trailer_model1_size_x			5.690
semi_trailer_model1_size_y			1.535
semi_trailer_model1_size_z			1.200

semi_trailer_model2_file_name  	    ford_escape/trailer-cargo.obj
semi_trailer_model2_x				1.85
semi_trailer_model2_y				0.0
semi_trailer_model2_z				0.2
semi_trailer_model2_roll			0.0
semi_trailer_model2_pitch			0.0
semi_trailer_model2_yaw				0.0
semi_trailer_model2_size_x			5.690
semi_trailer_model2_size_y			1.535
semi_trailer_model2_size_z			1.200

###############################
# camera position and orientation in relation to car

camera_x	0.245	# TODO: tem que ser lido no contexto da sensor board
camera_y	-0.287
camera_z	0.085
camera_roll	0.0
camera_pitch	0.0263
camera_yaw	0.0


###############################
# laser position and orientation in relation to car

laser_x		1.23	# TODO: tem que tratar o caso de nao ter, como nao tem... E o velodyne?
laser_y		-0.28
laser_z		1.13
laser_roll	0.0
laser_pitch	0.053 # tem que estimar
laser_yaw	0.0

# laser parameters

laser_size_x	0.04265	# 85.3 mm / 2. Eh o raio do Velodyne (na verdade, raio = sqrt(x*x + y*y))
laser_size_y	0.0 
laser_size_z	0.1442	# 144.2 mmm



##################################
##### Simulators and Logger ######
##################################


###############################
# simulator parameters

simulator_person_leg_width		1.5
simulator_person_dist_from_robot	0.0
simulator_person_speed			0.6

simulator_time					0.025
simulator_sync_mode				off
simulator_laser_probability_of_random_max	.0001
simulator_laser_probability_of_random_reading	.0001
simulator_laser_sensor_variance			.001
simulator_sonar_probability_of_random_max	.01
simulator_sonar_probability_of_random_reading	.005
simulator_sonar_sensor_variance			.05
simulator_use_robot					on
simulator_use_velocity_nn			on
simulator_use_phi_nn				on

simulator_send_localize_messages		on

simulator_frontlaser_maxrange        		50      # m
simulator_rearlaser_maxrange         		50      # m

simulator_ackerman_publish_laser 		on
simulator_ackerman_publish_detection_moving_objects	on

simulator_motion_timeout			10000.0


###############################
# logger parameters

#logger_ascii		off
logger_localize		off
logger_gps		on
logger_simulator	off
logger_imu          	on
logger_xsens		on
logger_velodyne		on
logger_velodyne_save_to_file on 
logger_xsens_mtig	off
logger_imu_pi       	on
logger_odometry		on
logger_visual_odometry 	off
logger_laser		on
logger_robot_laser	off
logger_params		on
logger_motioncmds   	off  # includes base_velocity and motion commands given to robot
logger_kinect		off
logger_bumblebee	on
logger_bumblebee_frames_to_save 1 # How many frames you save (1 for all)
logger_bumblebee_save_to_file on 
logger_web_cam		off
logger_camera		on
logger_sonar		off
logger_ford_escape_status on
logger_can_dump		off

######################################
# driving_playback parameters
######################################
$module driving_playback
driving_playback_distance_between_waypoints 1.0
driving_playback_num_poses_ahead 20

######################################
# polar_slam parameters
######################################
$module polar_slam
#polar_slam_odom_a1 0.00002
#polar_slam_odom_a2 0.00001
#polar_slam_odom_a3 0.00002
#polar_slam_odom_a4 0.00001

polar_slam_odom_a1 0.2
polar_slam_odom_a2 0.01
polar_slam_odom_a3 0.2
polar_slam_odom_a4 0.01

polar_slam_laser_sampling_step 		36
polar_slam_laser_num_beams 		361
polar_slam_laser_fov_range		180.0
polar_slam_laser_start_angle		-90.0
polar_slam_laser_max_range 		50.0
polar_slam_laser_lambda_short 		1.0
polar_slam_laser_sigma_zhit 		0.3
polar_slam_laser_zhit 			0.4
polar_slam_laser_zmax 			0.4
polar_slam_laser_zrand 			0.1
polar_slam_laser_zshort 		0.1

polar_slam_num_spheres			6
polar_slam_num_particles		20
polar_slam_num_points_to_store		20
polar_slam_num_angular_sections		360

######################################
# download map
download_map_from_internet	off

$module visual_odometry
visual_odometry_is_global_pos off

######################################
# saliency search
$module saliency_search
saliency_search_camera 8
saliency_search_number_of_saliencies 5

#####################################
#
$module neural_global_localizer
neural_global_localizer_camera	8
neural_global_localizer_training off
neural_global_localizer_save_train off


#####################################
# ekf odometry
$module ekf_odometry
ekf_odometry_camera	 		8
ekf_odometry_sensor_timeout 		10.0
ekf_odometry_frequency			5.0
ekf_odometry_odom_used  		off
ekf_odometry_vodom_used  		on
ekf_odometry_imu_used  			off
ekf_odometry_gps_used  			off
ekf_odometry_neural_globalpos_used 	on


####################################
# ZED Camera Sensor - JUST TO KEEP OLD THINGS WORKING-USE BUMBLEBEE PARAMETERS @@@Vinicius:Atualizar codigo_ZED

zed_camera_sensor_quality		2 	#HD2K: 0, HD1080: 1, HD720: 2, VGA: 3
zed_camera_sensor_fps			0.0	#0.0 is the default value
#RESOLUTION_HD2K 2208*1242, available framerates: 15 fps.
#RESOLUTION_HD1080 1920*1080, available framerates: 15, 30 fps.
#RESOLUTION_HD720 1280*720, available framerates: 15, 30, 60 fps.
#RESOLUTION_VGA 672*376, available framerates: 15, 30, 60, 100 fps.


####################################
# Road Mapper
$module road_mapper
road_mapper_sample_width		120	# pixels
road_mapper_sample_height		120	# pixels
road_mapper_distance_sample		5.0	# meters
road_mapper_distance_offset		0.5	# meters
road_mapper_n_offset			3	# n shifts to the left and n shifts to the right
road_mapper_n_rotation			24	# delta = (360 degrees / n_rotation)
road_mapper_out_path			$CARMEN_HOME/data/road_mapper  		# out path for generated sample files
road_mapper_out_path_remission		$CARMEN_HOME/data/road_mapper_remission # out path for generated remission files
road_mapper_image_channels		*	# road map sample image pixel may have either 1 (B&W) or 3 channels (BGR) or * for both
road_mapper_image_class_bits		4	# road map sample image pixel class may have 0 to 6 precision bits (B&W) or 8 precision bits (BGR)
road_mapper_remission_image_channels	3	# remission map sample image pixel may have either 1 (B&W) or 3 channels (BGR) or * for both
road_mapper_sampling_stride		50  # pixels,
road_mapper_prototxt_filename	$CARMEN_HOME/src/road_mapper/data/bn_conv_merged_model.prototxt # Caffe ENet model file
road_mapper_caffemodel_filename	$CARMEN_HOME/src/road_mapper/data/bn_conv_merged_weights.caffemodel # Caffe ENet trained weights file
road_mapper_label_colours_filename	$CARMEN_HOME/src/road_mapper/data/road_mapper_17.png # Caffe ENet label colours file
road_mapper_kernel_size			7   # kernel size used for rddf building from road map

